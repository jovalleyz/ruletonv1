<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>El Rulet√≥n de la Suerte</title>
    
    <!-- 1. Cargar Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- 2. Cargar React y ReactDOM -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    
    <!-- 3. Cargar Babel para traducir JSX -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <!-- Estilos Personalizados para Animaciones -->
    <style>
        @keyframes spin-slow {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }
        .animate-spin-slow {
            animation: spin-slow 10s linear infinite;
        }
        @keyframes blob {
            0% { transform: translate(0px, 0px) scale(1); }
            33% { transform: translate(30px, -50px) scale(1.1); }
            66% { transform: translate(-20px, 20px) scale(0.9); }
            100% { transform: translate(0px, 0px) scale(1); }
        }
        .animate-blob {
            animation: blob 7s infinite;
        }
        .animation-delay-2000 {
            animation-delay: 2s;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .animate-fadeIn {
            animation: fadeIn 0.5s ease-out forwards;
        }
        @keyframes slideUp {
            from { opacity: 0; transform: translateY(50px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .animate-slideUp {
            animation: slideUp 0.5s ease-out forwards;
        }
    </style>
</head>
<body class="bg-[#1a0b2e] text-white">

    <div id="root"></div>

    <!-- 4. Tu C√≥digo de Aplicaci√≥n -->
    <script type="text/babel">
        const { useState, useEffect, useRef } = React;

        // --- ICONOS SVG MANUALES (Para evitar imports externos complejos) ---
        const IconBase = ({ children, size = 24, className = "" }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
                {children}
            </svg>
        );

        const User = (p) => <IconBase {...p}><path d="M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"/><circle cx="12" cy="7" r="4"/></IconBase>;
        const CreditCard = (p) => <IconBase {...p}><rect x="1" y="4" width="22" height="16" rx="2" ry="2"/><line x1="1" y1="10" x2="23" y2="10"/></IconBase>;
        const Gift = (p) => <IconBase {...p}><polyline points="20 12 20 22 4 22 4 12"/><rect x="2" y="7" width="20" height="5"/><line x1="12" y1="22" x2="12" y2="7"/><path d="M12 7H7.5a2.5 2.5 0 0 1 0-5C11 2 12 7 12 7z"/><path d="M12 7h4.5a2.5 2.5 0 0 0 0-5C13 2 12 7 12 7z"/></IconBase>;
        const Phone = (p) => <IconBase {...p}><path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"/></IconBase>;
        const Mail = (p) => <IconBase {...p}><path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"/><polyline points="22,6 12,13 2,6"/></IconBase>;
        const Lock = (p) => <IconBase {...p}><rect x="3" y="11" width="18" height="11" rx="2" ry="2"/><path d="M7 11V7a5 5 0 0 1 10 0v4"/></IconBase>;
        const Check = (p) => <IconBase {...p}><polyline points="20 6 9 17 4 12"/></IconBase>;
        const Menu = (p) => <IconBase {...p}><line x1="3" y1="12" x2="21" y2="12"/><line x1="3" y1="6" x2="21" y2="6"/><line x1="3" y1="18" x2="21" y2="18"/></IconBase>;
        const XIcon = (p) => <IconBase {...p}><line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/></IconBase>;
        const ChevronRight = (p) => <IconBase {...p}><polyline points="9 18 15 12 9 6"/></IconBase>;
        const DollarSign = (p) => <IconBase {...p}><line x1="12" y1="1" x2="12" y2="23"/><path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"/></IconBase>;
        const LogOut = (p) => <IconBase {...p}><path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"/><polyline points="16 17 21 12 16 7"/><line x1="21" y1="12" x2="9" y2="12"/></IconBase>;
        const MapPin = (p) => <IconBase {...p}><path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"/><circle cx="12" cy="10" r="3"/></IconBase>;
        const Star = (p) => <IconBase {...p}><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"/></IconBase>;
        const Calendar = (p) => <IconBase {...p}><rect x="3" y="4" width="18" height="18" rx="2" ry="2"/><line x1="16" y1="2" x2="16" y2="6"/><line x1="8" y1="2" x2="8" y2="6"/><line x1="3" y1="10" x2="21" y2="10"/></IconBase>;
        const Flag = (p) => <IconBase {...p}><path d="M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z"/><line x1="4" y1="22" x2="4" y2="15"/></IconBase>;
        const Hash = (p) => <IconBase {...p}><line x1="4" y1="9" x2="20" y2="9"/><line x1="4" y1="15" x2="20" y2="15"/><line x1="10" y1="3" x2="8" y2="21"/><line x1="16" y1="3" x2="14" y2="21"/></IconBase>;
        const MapIcon = (p) => <IconBase {...p}><polygon points="1 6 1 22 8 18 16 22 23 18 23 2 16 6 8 2 1 6"/><line x1="8" y1="2" x2="8" y2="18"/><line x1="16" y1="6" x2="16" y2="22"/></IconBase>;
        const UserCircle = (p) => <IconBase {...p}><circle cx="12" cy="12" r="10"/><circle cx="12" cy="10" r="3"/><path d="M6.168 18.849a4 4 0 0 1 3.832-2.849h4a4 4 0 0 1 3.834 2.855"/></IconBase>;
        const Clock = (p) => <IconBase {...p}><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></IconBase>;
        const TrendingUp = (p) => <IconBase {...p}><polyline points="23 6 13.5 15.5 8.5 10.5 1 18"/><polyline points="17 6 23 6 23 12"/></IconBase>;
        const HistoryIcon = (p) => <IconBase {...p}><path d="M3 3v5h5"/><path d="M3.05 13A9 9 0 1 0 6 5.3L3 8"/></IconBase>;
        const ArrowRight = (p) => <IconBase {...p}><line x1="5" y1="12" x2="19" y2="12"/><polyline points="12 5 19 12 12 19"/></IconBase>;

        // --- CONSTANTES ---
        const COLORS = {
            bg: 'bg-[#1a0b2e]',
            bgCard: 'bg-[#2d1b4e]',
            primary: 'bg-[#f97316]',
            primaryHover: 'hover:bg-[#ea580c]',
            accent: 'text-[#06b6d4]',
            text: 'text-white',
            gold: 'text-[#fbbf24]'
        };

        const GAMES = [
            { id: 1, title: 'La Super Vuelta', type: 'instant', color: 'from-pink-500 to-purple-600', icon: 'üé°', cost: 20 },
            { id: 2, title: 'Rulet√≥n Instant√°neo', type: 'instant', color: 'from-blue-500 to-cyan-500', icon: 'üé∞', cost: 20 },
            { id: 3, title: 'Viaja con RD$100', type: 'instant', color: 'from-yellow-500 to-orange-500', icon: '‚úàÔ∏è', cost: 20 },
            { id: 4, title: 'La Rifa Que Premia', type: 'raffle', color: 'from-green-500 to-emerald-600', icon: 'üé´', cost: 20 },
        ];

        const PRIZES = [
            { label: '100 Puntos', value: 100, type: 'money', color: '#ec4899' },
            { label: 'Sesi√≥n Spa', value: 0, type: 'item', color: '#8b5cf6' },
            { label: 'Cena Doble', value: 0, type: 'item', color: '#3b82f6' },
            { label: 'Day Pass', value: 0, type: 'item', color: '#10b981' },
            { label: 'Tour VIP', value: 0, type: 'item', color: '#f59e0b' },
            { label: 'Intenta de nuevo', value: 0, type: 'none', color: '#6b7280' },
        ];

        // --- COMPONENTE PRINCIPAL ---
        function App() {
            const [user, setUser] = useState(null);
            const [view, setView] = useState('home');
            const [balance, setBalance] = useState(0);
            const [totalSpent, setTotalSpent] = useState(0);
            const [history, setHistory] = useState([]);
            const [inventory, setInventory] = useState([]);
            const [selectedGame, setSelectedGame] = useState(null);
            const [pendingPrize, setPendingPrize] = useState(null);
            const [showConfetti, setShowConfetti] = useState(false);
            const [mobileMenuOpen, setMobileMenuOpen] = useState(false);
            const [showProfileCompletionModal, setShowProfileCompletionModal] = useState(false);
            const profileTimerRef = useRef(null);

            // Logica del temporizador de 20 segundos
            useEffect(() => {
                if (!user || user.isProfileComplete) {
                    if (profileTimerRef.current) clearTimeout(profileTimerRef.current);
                    setShowProfileCompletionModal(false);
                    return;
                }

                if (user && !user.isProfileComplete) {
                    profileTimerRef.current = setTimeout(() => {
                        setShowProfileCompletionModal(true);
                    }, 20000);
                }

                return () => {
                    if (profileTimerRef.current) clearTimeout(profileTimerRef.current);
                };
            }, [user]);

            const handleGameSelect = (game) => {
                setSelectedGame(game);
                setView('game');
            };

            const handleSpinStart = (game) => {
                if (user) {
                    setTotalSpent(prev => prev + game.cost);
                    setBalance(prev => prev - game.cost);
                }
            };

            const handleWin = (prize, game) => {
                if (!user) {
                    setPendingPrize({...prize, sourceGame: game});
                    setTimeout(() => setView('register-prompt'), 1500);
                } else {
                    const newHistoryItem = {
                        id: Date.now(),
                        gameTitle: game.title,
                        gameIcon: game.icon,
                        gameColor: game.color,
                        date: new Date().toLocaleDateString('es-DO', { day: 'numeric', month: 'short', year: 'numeric' }),
                        cost: game.cost,
                        status: game.type === 'raffle' ? 'pending' : 'completed',
                        prize: prize.label
                    };
                    setHistory(prev => [newHistoryItem, ...prev]);

                    if (game.type !== 'raffle') {
                        if (prize.type === 'money') {
                            setBalance(prev => prev + prize.value);
                            alert(`¬°Ganaste ${prize.label}! Se agregaron a tu cuenta.`);
                        } else if (prize.type === 'item') {
                            setInventory(prev => [...prev, prize.label]);
                            alert(`¬°Felicidades! Ganaste: ${prize.label}. Revisa tu perfil.`);
                        }
                    } else {
                        alert("¬°Participaci√≥n registrada! El sorteo se realizar√° pronto.");
                    }
                }
            };

            const handleRegister = (userData) => {
                const newUser = {
                    ...userData,
                    id: Date.now(),
                    isProfileComplete: false
                };
                setUser(newUser);

                if (pendingPrize) {
                    setBalance(pendingPrize.value);
                    const guestHistoryItem = {
                        id: Date.now(),
                        gameTitle: pendingPrize.sourceGame.title,
                        gameIcon: pendingPrize.sourceGame.icon,
                        gameColor: pendingPrize.sourceGame.color,
                        date: new Date().toLocaleDateString('es-DO', { day: 'numeric', month: 'short', year: 'numeric' }),
                        cost: 0,
                        status: 'completed',
                        prize: pendingPrize.label
                    };
                    setHistory([guestHistoryItem]);
                    setPendingPrize(null);
                    setShowConfetti(true);
                    setTimeout(() => setShowConfetti(false), 5000);
                    setView('game');
                } else {
                    setView('home');
                }
            };

            const handleCompleteProfile = (additionalData) => {
                setUser(prev => ({
                    ...prev,
                    ...additionalData,
                    isProfileComplete: true
                }));
                setShowProfileCompletionModal(false);
                alert("¬°Perfil completado! Ahora puedes retirar tus premios sin l√≠mites.");
            };

            const handleRecharge = (amount) => {
                setBalance(prev => prev + parseInt(amount));
                alert(`¬°Recarga de $${amount} exitosa!`);
                setView('game');
            };

            const logout = () => {
                setUser(null);
                setBalance(0);
                setTotalSpent(0);
                setHistory([]);
                setInventory([]);
                setView('home');
                setShowProfileCompletionModal(false);
            };

            return (
                <div className={`min-h-screen ${COLORS.bg} ${COLORS.text} font-sans overflow-x-hidden selection:bg-pink-500 selection:text-white`}>
                    <nav className="bg-opacity-90 backdrop-blur-md bg-[#130524] sticky top-0 z-50 border-b border-purple-900/50 shadow-lg">
                        <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                            <div className="flex items-center justify-between h-20">
                                <div className="flex-shrink-0 cursor-pointer flex items-center gap-2" onClick={() => setView('home')}>
                                    <div className="relative w-10 h-10 flex items-center justify-center bg-gradient-to-tr from-orange-500 to-pink-500 rounded-full animate-pulse">
                                        <span className="text-2xl font-bold">R</span>
                                    </div>
                                    <div className="flex flex-col">
                                        <span className="font-bold text-xl tracking-tighter leading-none bg-clip-text text-transparent bg-gradient-to-r from-white to-gray-300">EL RULET√ìN</span>
                                        <span className="text-[10px] text-pink-400 font-bold tracking-widest uppercase">De La Suerte</span>
                                    </div>
                                </div>
                                <div className="hidden md:block">
                                    <div className="ml-10 flex items-baseline space-x-4">
                                        <button onClick={() => setView('home')} className="hover:text-pink-400 px-3 py-2 rounded-md text-sm font-medium transition-colors">Inicio</button>
                                        <button onClick={() => setView('home')} className="hover:text-pink-400 px-3 py-2 rounded-md text-sm font-medium transition-colors">Ruletas</button>
                                        {user && <button onClick={() => setView('profile')} className="hover:text-pink-400 px-3 py-2 rounded-md text-sm font-medium transition-colors">Mi Dashboard</button>}
                                    </div>
                                </div>
                                <div className="hidden md:flex items-center gap-4">
                                    {user ? (
                                        <div className="flex items-center gap-4 bg-[#2d1b4e] py-1 px-4 rounded-full border border-purple-700/50">
                                            <div className="flex flex-col items-end">
                                                <span className="text-xs text-gray-400">Balance</span>
                                                <span className="text-sm font-bold text-green-400 flex items-center gap-1">
                                                    <DollarSign size={12} /> {balance} Puntos
                                                </span>
                                            </div>
                                            <div className="h-8 w-[1px] bg-purple-700"></div>
                                            <div className="flex items-center gap-2 cursor-pointer" onClick={() => setView('profile')}>
                                                <div className="flex flex-col items-end mr-1">
                                                    <span className="font-bold text-sm truncate max-w-[100px]">{user.firstName}</span>
                                                    {!user.isProfileComplete && (
                                                        <span className="text-[10px] text-yellow-500 animate-pulse">‚ö† Perfil incompleto</span>
                                                    )}
                                                </div>
                                                <div className="h-8 w-8 rounded-full bg-gradient-to-br from-pink-500 to-purple-600 flex items-center justify-center shadow-inner">
                                                    <User size={16} />
                                                </div>
                                            </div>
                                        </div>
                                    ) : (
                                        <button onClick={() => setView('register-prompt')} className="bg-transparent border border-pink-500 text-pink-400 hover:bg-pink-500 hover:text-white px-4 py-2 rounded-full text-sm font-bold transition-all duration-300 shadow-[0_0_15px_rgba(236,72,153,0.3)]">
                                            Iniciar Sesi√≥n
                                        </button>
                                    )}
                                </div>
                                <div className="-mr-2 flex md:hidden">
                                    <button onClick={() => setMobileMenuOpen(!mobileMenuOpen)} className="bg-purple-900 inline-flex items-center justify-center p-2 rounded-md text-gray-400 hover:text-white hover:bg-purple-700 focus:outline-none">
                                        {mobileMenuOpen ? <XIcon size={24} /> : <Menu size={24} />}
                                    </button>
                                </div>
                            </div>
                        </div>
                        {mobileMenuOpen && (
                            <div className="md:hidden bg-[#2d1b4e] px-2 pt-2 pb-3 space-y-1 sm:px-3 border-b border-purple-800">
                                {user && (
                                    <div className="px-3 py-2 text-white font-bold border-b border-purple-700 mb-2 flex justify-between items-center">
                                        <span>Hola, {user.firstName}</span>
                                        <span className="text-green-400">${balance}</span>
                                    </div>
                                )}
                                <button onClick={() => { setView('home'); setMobileMenuOpen(false)}} className="text-gray-300 hover:text-white block px-3 py-2 rounded-md text-base font-medium">Inicio</button>
                                {user && <button onClick={() => { setView('profile'); setMobileMenuOpen(false)}} className="text-gray-300 hover:text-white block px-3 py-2 rounded-md text-base font-medium">Mi Perfil</button>}
                            </div>
                        )}
                    </nav>

                    <main className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 min-h-[calc(100vh-80px)] relative">
                        {showConfetti && <ConfettiOverlay />}

                        {showProfileCompletionModal && (
                            <div className="fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm animate-fadeIn">
                                <div className="bg-[#2d1b4e] w-full max-w-2xl max-h-[90vh] overflow-y-auto rounded-2xl shadow-2xl border border-orange-500/50 flex flex-col">
                                    <div className="p-6 border-b border-purple-800 flex justify-between items-center bg-gradient-to-r from-orange-900/20 to-purple-900/20">
                                        <div>
                                            <h2 className="text-2xl font-bold text-white flex items-center gap-2">
                                                <UserCircle className="text-orange-500" /> Completa tu Perfil
                                            </h2>
                                            <p className="text-sm text-gray-300">Necesitamos estos datos adicionales para procesar tus premios.</p>
                                        </div>
                                        <button onClick={() => setShowProfileCompletionModal(false)} className="text-gray-400 hover:text-white">
                                            <XIcon size={24} />
                                        </button>
                                    </div>
                                    <div className="p-6">
                                        <CompleteProfileForm onComplete={handleCompleteProfile} />
                                    </div>
                                </div>
                            </div>
                        )}

                        {view === 'home' && <HomeView onPlay={handleGameSelect} user={user} balance={balance} />}
                        {view === 'game' && selectedGame && <GameView game={selectedGame} user={user} balance={balance} onWin={handleWin} onSpinStart={handleSpinStart} onBack={() => setView('home')} onRecharge={() => setView('recharge')} />}
                        {view === 'register-prompt' && <RegisterForm pendingPrize={pendingPrize} onRegister={handleRegister} onCancel={() => setView('home')} />}
                        {view === 'recharge' && <RechargePage onRecharge={handleRecharge} onCancel={() => setView('game')} />}
                        {view === 'profile' && user && <ProfileView user={user} balance={balance} totalSpent={totalSpent} history={history} inventory={inventory} onLogout={logout} onBack={() => setView('home')} onOpenComplete={() => setShowProfileCompletionModal(true)} onPlayMore={() => setView('home')} />}
                    </main>

                    <footer className="bg-[#130524] border-t border-purple-900 py-10 mt-10">
                        <div className="max-w-7xl mx-auto px-4 text-center">
                            <div className="flex justify-center space-x-6 mb-6 text-gray-400">
                                <Star size={20} className="hover:text-orange-500 cursor-pointer"/>
                                <Gift size={20} className="hover:text-orange-500 cursor-pointer"/>
                                <Phone size={20} className="hover:text-orange-500 cursor-pointer"/>
                            </div>
                            <p className="text-gray-500 text-sm">¬© 2024 El Rulet√≥n de la Suerte. Todos los derechos reservados.</p>
                            <p className="text-gray-600 text-xs mt-2">Juega con responsabilidad. +18 a√±os.</p>
                        </div>
                    </footer>
                </div>
            );
        }

        // --- SUB COMPONENTES ---

        function HomeView({ onPlay, user, balance }) {
            return (
                <div className="space-y-12 animate-fadeIn">
                    <div className="relative rounded-3xl overflow-hidden bg-gradient-to-r from-purple-900 to-[#1a0b2e] border border-purple-700 shadow-2xl min-h-[400px] flex items-center">
                        <div className="absolute top-0 right-0 w-full h-full opacity-30 bg-[url('https://www.transparenttextures.com/patterns/stardust.png')]"></div>
                        <div className="absolute -top-20 -right-20 w-96 h-96 bg-pink-600 rounded-full mix-blend-multiply filter blur-3xl opacity-20 animate-blob"></div>
                        <div className="absolute -bottom-20 -left-20 w-96 h-96 bg-purple-600 rounded-full mix-blend-multiply filter blur-3xl opacity-20 animate-blob animation-delay-2000"></div>
                        <div className="relative z-10 p-8 md:p-16 w-full md:w-2/3">
                            <h1 className="text-4xl md:text-6xl font-extrabold tracking-tight leading-snug mb-4">
                                <span className="block text-transparent bg-clip-text bg-gradient-to-r from-white to-purple-200 pb-2">Gira, Juega</span>
                                <span className="block text-transparent bg-clip-text bg-gradient-to-r from-orange-400 to-pink-500">y Gana Real.</span>
                            </h1>
                            <p className="mt-4 text-lg text-gray-300 max-w-lg leading-relaxed">
                                Bienvenido al portal de juegos m√°s emocionante. Reg√≠strate, canjea tus premios y vive experiencias √∫nicas.
                            </p>
                            <div className="mt-8 flex gap-4">
                                {user && (
                                    <div className="bg-purple-800/50 backdrop-blur px-6 py-3 rounded-xl border border-purple-500/30 flex items-center gap-2">
                                        <span className="text-sm text-gray-300">Tu saldo:</span>
                                        <span className="text-xl font-bold text-green-400">${balance}</span>
                                    </div>
                                )}
                            </div>
                        </div>
                        <div className="hidden md:block absolute right-10 bottom-0 top-0 w-1/3 flex items-center justify-center">
                            <div className="relative w-64 h-64 animate-spin-slow">
                                <svg viewBox="0 0 100 100" className="w-full h-full drop-shadow-[0_0_30px_rgba(236,72,153,0.5)]">
                                    <circle cx="50" cy="50" r="45" fill="none" stroke="#ec4899" strokeWidth="2" strokeDasharray="10 5" />
                                    <circle cx="50" cy="50" r="35" fill="none" stroke="#06b6d4" strokeWidth="2" strokeDasharray="5 5" />
                                    <text x="50" y="55" textAnchor="middle" fill="white" fontSize="30">üí∞</text>
                                </svg>
                            </div>
                        </div>
                    </div>
                    <div>
                        <div className="flex items-center justify-between mb-6">
                            <h2 className="text-2xl font-bold flex items-center gap-2">
                                <span className="w-1 h-8 bg-orange-500 rounded-full"></span>
                                Juegos Disponibles
                            </h2>
                            <span className="text-sm text-cyan-400 cursor-pointer hover:underline">Ver todos</span>
                        </div>
                        <div className="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6">
                            {GAMES.map((game) => (
                                <div key={game.id} onClick={() => onPlay(game)} className="group relative bg-[#2d1b4e] rounded-2xl overflow-hidden cursor-pointer hover:-translate-y-2 transition-all duration-300 border border-purple-800 hover:border-pink-500 shadow-xl">
                                    <div className={`h-32 bg-gradient-to-br ${game.color} flex items-center justify-center relative overflow-hidden`}>
                                        <div className="absolute inset-0 bg-black opacity-20 group-hover:opacity-0 transition-opacity"></div>
                                        <span className="text-6xl transform group-hover:scale-110 transition-transform duration-300 drop-shadow-lg">{game.icon}</span>
                                    </div>
                                    <div className="p-5">
                                        <h3 className="font-bold text-lg mb-1 group-hover:text-pink-400 transition-colors">{game.title}</h3>
                                        <div className="flex justify-between items-center mt-3">
                                            <div className="flex items-center gap-2">
                                                <span className="text-xs bg-purple-900/50 px-2 py-1 rounded text-purple-200 border border-purple-700">Costo: ${game.cost}</span>
                                                {game.type === 'raffle' && <span className="text-xs bg-green-900/50 px-2 py-1 rounded text-green-200 border border-green-700">Sorteo</span>}
                                            </div>
                                            <div className="w-8 h-8 rounded-full bg-orange-500 text-white flex items-center justify-center shadow-lg group-hover:bg-pink-500 transition-colors">
                                                <ChevronRight size={18} />
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            ))}
                        </div>
                    </div>
                </div>
            );
        }

        function GameView({ game, user, balance, onWin, onSpinStart, onBack, onRecharge }) {
            const [spinning, setSpinning] = useState(false);
            const [rotation, setRotation] = useState(0);

            const spinWheel = () => {
                if (user && balance < game.cost) {
                    alert("Saldo insuficiente. Por favor recarga.");
                    return;
                }
                if(user && onSpinStart) {
                    onSpinStart(game);
                }
                setSpinning(true);
                let winningIndex;
                if (!user) {
                    winningIndex = 0; 
                } else {
                    winningIndex = Math.floor(Math.random() * PRIZES.length);
                }
                const segmentAngle = 360 / PRIZES.length;
                const randomOffset = Math.floor(Math.random() * (segmentAngle - 2)) + 1;
                const targetRotation = 360 * 8 + (360 - (winningIndex * segmentAngle)) + randomOffset;
                setRotation(rotation + targetRotation);
                setTimeout(() => {
                    setSpinning(false);
                    onWin(PRIZES[winningIndex], game);
                }, 5000);
            };

            return (
                <div className="flex flex-col items-center justify-center min-h-[600px] animate-fadeIn">
                    <div className="w-full max-w-4xl flex items-center justify-between mb-8">
                        <button onClick={onBack} className="text-gray-400 hover:text-white flex items-center gap-2 transition-colors">
                            ‚Üê Volver
                        </button>
                        <div className="text-center">
                            <h2 className="text-3xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-pink-400 to-orange-400">{game.title}</h2>
                            {!user && <p className="text-xs text-green-400 animate-pulse">¬°PRUEBA TU SUERTE GRATIS!</p>}
                            {user && <p className="text-xs text-gray-400">Costo por giro: ${game.cost}</p>}
                        </div>
                        <div className="w-20"></div>
                    </div>
                    <div className="relative group">
                        <div className="absolute top-0 left-1/2 -translate-x-1/2 -translate-y-4 z-20 w-8 h-12">
                            <div className="w-0 h-0 border-l-[10px] border-l-transparent border-r-[10px] border-r-transparent border-t-[20px] border-t-white drop-shadow-lg filter"></div>
                        </div>
                        <div className="w-[300px] h-[300px] md:w-[450px] md:h-[450px] rounded-full border-8 border-gray-800 shadow-[0_0_50px_rgba(236,72,153,0.3)] overflow-hidden relative transition-transform duration-[5000ms] cubic-bezier(0.25, 0.1, 0.25, 1)" style={{ transform: `rotate(${rotation}deg)` }}>
                            {PRIZES.map((prize, index) => {
                                const angle = 360 / PRIZES.length;
                                return (
                                    <div key={index} className="absolute top-0 left-0 w-full h-full origin-center flex justify-center pt-4" style={{ transform: `rotate(${index * angle}deg)`, background: `conic-gradient(from -${angle/2}deg at 50% 50%, ${prize.color} 0deg, ${prize.color} ${angle}deg, transparent ${angle}deg)`, clipPath: 'polygon(50% 50%, 0 0, 100% 0)' }}>
                                        <span className="transform -translate-y-0 rotate-0 font-bold text-white text-xs md:text-sm drop-shadow-md pt-8 text-center w-24">
                                            {prize.label}
                                        </span>
                                    </div>
                                );
                            })}
                            <div className="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-12 h-12 bg-gray-900 rounded-full border-4 border-white z-10 flex items-center justify-center">
                                <span className="text-xl">‚≠ê</span>
                            </div>
                        </div>
                    </div>
                    <div className="mt-10 flex flex-col items-center gap-4">
                        {!user ? (
                            <button onClick={spinWheel} disabled={spinning} className={`px-12 py-4 text-xl font-bold rounded-full shadow-[0_0_20px_rgba(249,115,22,0.5)] transition-all transform hover:scale-105 active:scale-95 ${spinning ? 'bg-gray-600 cursor-not-allowed' : 'bg-gradient-to-r from-orange-500 to-pink-600 hover:from-orange-400 hover:to-pink-500 text-white'}`}>
                                {spinning ? 'Girando...' : '¬°GIRA AHORA!'}
                            </button>
                        ) : (
                            <div className="flex flex-col items-center gap-3">
                                {balance >= game.cost ? (
                                    <button onClick={spinWheel} disabled={spinning} className={`px-12 py-4 text-xl font-bold rounded-full shadow-[0_0_20px_rgba(6,182,212,0.5)] transition-all transform hover:scale-105 active:scale-95 ${spinning ? 'bg-gray-600 cursor-not-allowed' : 'bg-gradient-to-r from-cyan-600 to-blue-600 hover:from-cyan-500 hover:to-blue-500 text-white'}`}>
                                        {spinning ? 'Mucha suerte...' : `GIRAR (-$${game.cost})`}
                                    </button>
                                ) : (
                                    <div className="text-center bg-red-900/50 p-4 rounded-xl border border-red-700">
                                        <p className="text-red-200 mb-2">Ups, te has quedado sin coins.</p>
                                        <button onClick={onRecharge} className="px-6 py-2 bg-green-600 hover:bg-green-500 text-white rounded-lg font-bold shadow-lg flex items-center gap-2">
                                            <CreditCard size={18}/> Recargar Saldo
                                        </button>
                                    </div>
                                )}
                            </div>
                        )}
                    </div>
                </div>
            );
        }

        function RegisterForm({ pendingPrize, onRegister, onCancel }) {
            const [formData, setFormData] = useState({ firstName: '', lastName: '', phone: '', email: '', password: '', confirmPassword: '', idNumber: '' });
            const handleSubmit = (e) => {
                e.preventDefault();
                if (formData.password !== formData.confirmPassword) {
                    alert("Las contrase√±as no coinciden");
                    return;
                }
                onRegister(formData);
            };
            const handleChange = (e) => setFormData({...formData, [e.target.name]: e.target.value});
            return (
                <div className="max-w-md mx-auto animate-slideUp">
                    {pendingPrize && (
                        <div className="mb-6 bg-gradient-to-r from-yellow-600/20 to-orange-600/20 border border-yellow-500/50 rounded-xl p-4 flex items-center gap-4">
                            <div className="bg-yellow-500/20 p-3 rounded-full text-yellow-400">
                                <Gift size={24} />
                            </div>
                            <div>
                                <h3 className="font-bold text-yellow-400 text-lg">¬°Premio en espera!</h3>
                                <p className="text-sm text-yellow-200">Reg√≠strate ahora para reclamar tus <span className="font-bold text-white">{pendingPrize.label}</span>.</p>
                            </div>
                        </div>
                    )}
                    <div className="bg-[#2d1b4e] rounded-2xl shadow-2xl border border-purple-800 p-8">
                        <h2 className="text-2xl font-bold text-center mb-6 text-white">Crea tu cuenta</h2>
                        <p className="text-gray-400 text-xs text-center mb-6">Reg√≠strate en un paso r√°pido. Completa el resto despu√©s.</p>
                        <form onSubmit={handleSubmit} className="space-y-4">
                            <div className="grid grid-cols-2 gap-4">
                                <div><label className="block text-xs font-medium text-gray-400 mb-1">Nombre</label><input required name="firstName" onChange={handleChange} type="text" className="w-full bg-[#1a0b2e] border border-purple-700 rounded-lg px-3 py-2 text-white focus:outline-none focus:border-pink-500 transition-colors" placeholder="Juan" /></div>
                                <div><label className="block text-xs font-medium text-gray-400 mb-1">Apellido</label><input required name="lastName" onChange={handleChange} type="text" className="w-full bg-[#1a0b2e] border border-purple-700 rounded-lg px-3 py-2 text-white focus:outline-none focus:border-pink-500 transition-colors" placeholder="P√©rez" /></div>
                            </div>
                            <div><label className="block text-xs font-medium text-gray-400 mb-1">Tel√©fono (RD)</label><div className="relative"><Phone size={16} className="absolute left-3 top-3 text-gray-500"/><input required name="phone" onChange={handleChange} type="tel" className="w-full bg-[#1a0b2e] border border-purple-700 rounded-lg pl-10 pr-3 py-2 text-white focus:outline-none focus:border-pink-500 transition-colors" placeholder="809-000-0000" /></div></div>
                            <div><label className="block text-xs font-medium text-gray-400 mb-1">Correo Electr√≥nico</label><div className="relative"><Mail size={16} className="absolute left-3 top-3 text-gray-500"/><input required name="email" onChange={handleChange} type="email" className="w-full bg-[#1a0b2e] border border-purple-700 rounded-lg pl-10 pr-3 py-2 text-white focus:outline-none focus:border-pink-500 transition-colors" placeholder="tu@correo.com" /></div></div>
                            <div className="grid grid-cols-2 gap-4">
                                <div><label className="block text-xs font-medium text-gray-400 mb-1">Contrase√±a</label><input required name="password" onChange={handleChange} type="password" className="w-full bg-[#1a0b2e] border border-purple-700 rounded-lg px-3 py-2 text-white focus:outline-none focus:border-pink-500 transition-colors" placeholder="******" /></div>
                                <div><label className="block text-xs font-medium text-gray-400 mb-1">Confirmar</label><input required name="confirmPassword" onChange={handleChange} type="password" className="w-full bg-[#1a0b2e] border border-purple-700 rounded-lg px-3 py-2 text-white focus:outline-none focus:border-pink-500 transition-colors" placeholder="******" /></div>
                            </div>
                            <button type="submit" className="w-full bg-gradient-to-r from-pink-500 to-purple-600 hover:from-pink-400 hover:to-purple-500 text-white font-bold py-3 rounded-lg shadow-lg mt-4 transition-all transform active:scale-95">{pendingPrize ? 'Registrarme y Reclamar Premio' : 'Crear Cuenta'}</button>
                            <button type="button" onClick={onCancel} className="w-full text-center text-sm text-gray-400 hover:text-white mt-2">Cancelar</button>
                        </form>
                    </div>
                </div>
            );
        }

        function RechargePage({ onRecharge, onCancel }) {
            const [amount, setAmount] = useState(20);
            const [loading, setLoading] = useState(false);
            const handleSubmit = (e) => {
                e.preventDefault();
                setLoading(true);
                setTimeout(() => { setLoading(false); onRecharge(amount); }, 2000);
            };
            return (
                <div className="max-w-md mx-auto animate-fadeIn">
                    <button onClick={onCancel} className="mb-4 text-gray-400 hover:text-white text-sm">‚Üê Volver al juego</button>
                    <div className="bg-[#2d1b4e] rounded-2xl shadow-2xl border border-purple-800 p-8">
                        <div className="text-center mb-6">
                            <div className="inline-flex items-center justify-center w-16 h-16 bg-green-500/20 rounded-full mb-3 text-green-400"><CreditCard size={32} /></div>
                            <h2 className="text-2xl font-bold text-white">Recargar Balance</h2>
                            <p className="text-gray-400 text-sm">Agrega coins para seguir jugando</p>
                        </div>
                        <form onSubmit={handleSubmit} className="space-y-6">
                            <div>
                                <label className="block text-sm font-medium text-gray-300 mb-2">Monto a recargar (USD)</label>
                                <div className="grid grid-cols-3 gap-3">
                                    {[20, 50, 100].map(val => (
                                        <button key={val} type="button" onClick={() => setAmount(val)} className={`py-2 rounded-lg border font-bold transition-all ${amount === val ? 'bg-green-600 border-green-400 text-white' : 'bg-[#1a0b2e] border-purple-700 text-gray-400 hover:border-gray-500'}`}>${val}</button>
                                    ))}
                                </div>
                                <div className="mt-2 text-xs text-gray-500 text-center">M√≠nimo $20 USD = 20 Puntos</div>
                            </div>
                            <div className="space-y-3 pt-4 border-t border-purple-800">
                                <div className="relative"><CreditCard size={18} className="absolute left-3 top-3 text-gray-500" /><input required type="text" className="w-full bg-[#1a0b2e] border border-purple-700 rounded-lg pl-10 pr-3 py-2 text-white placeholder-gray-600 focus:outline-none focus:border-green-500" placeholder="0000 0000 0000 0000" /></div>
                                <div className="grid grid-cols-2 gap-4">
                                    <input required type="text" className="w-full bg-[#1a0b2e] border border-purple-700 rounded-lg px-3 py-2 text-white placeholder-gray-600 focus:outline-none focus:border-green-500" placeholder="MM/YY" />
                                    <input required type="text" className="w-full bg-[#1a0b2e] border border-purple-700 rounded-lg px-3 py-2 text-white placeholder-gray-600 focus:outline-none focus:border-green-500" placeholder="CVC" />
                                </div>
                                <div className="flex items-center gap-2 mt-2"><input type="checkbox" id="saveCard" defaultChecked className="rounded border-gray-600 text-green-500 focus:ring-green-500 bg-[#1a0b2e]"/><label htmlFor="saveCard" className="text-xs text-gray-400">Guardar tarjeta para futuras compras</label></div>
                            </div>
                            <button type="submit" disabled={loading} className={`w-full py-3 rounded-lg shadow-lg font-bold text-white flex items-center justify-center gap-2 transition-all ${loading ? 'bg-gray-600 cursor-wait' : 'bg-green-600 hover:bg-green-500'}`}>{loading ? 'Procesando...' : `Pagar $${amount}.00 USD`}</button>
                        </form>
                    </div>
                </div>
            );
        }

        function CompleteProfileForm({ onComplete }) {
            const [formData, setFormData] = useState({ username: '', birthDate: '', gender: '', nationality: 'Dominicana', idType: 'C√©dula', idNumber: '', country: 'Rep√∫blica Dominicana', province: '', address: '' });
            const handleChange = (e) => setFormData({...formData, [e.target.name]: e.target.value});
            const handleSubmit = (e) => { e.preventDefault(); onComplete(formData); };
            return (
                <form onSubmit={handleSubmit} className="space-y-6">
                    <div>
                        <h3 className="text-sm font-bold text-pink-400 uppercase tracking-wider mb-3 flex items-center gap-2"><User size={16}/> Informaci√≥n Personal & ID</h3>
                        <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <div><label className="block text-xs text-gray-400 mb-1">Nombre de Usuario *</label><div className="relative"><UserCircle size={16} className="absolute left-3 top-3 text-gray-500" /><input required name="username" onChange={handleChange} className="w-full bg-[#1a0b2e] border border-purple-700 rounded-lg pl-10 pr-3 py-2 text-white focus:border-pink-500 outline-none" placeholder="Gamer123" /></div></div>
                            <div><label className="block text-xs text-gray-400 mb-1">Fecha de Nacimiento *</label><div className="relative"><Calendar size={16} className="absolute left-3 top-3 text-gray-500" /><input required name="birthDate" type="date" onChange={handleChange} className="w-full bg-[#1a0b2e] border border-purple-700 rounded-lg pl-10 pr-3 py-2 text-white focus:border-pink-500 outline-none" /></div></div>
                            <div><label className="block text-xs text-gray-400 mb-1">Sexo *</label><select required name="gender" onChange={handleChange} className="w-full bg-[#1a0b2e] border border-purple-700 rounded-lg px-3 py-2 text-white focus:border-pink-500 outline-none"><option value="">Seleccionar</option><option value="M">Masculino</option><option value="F">Femenino</option><option value="O">Otro</option></select></div>
                            <div><label className="block text-xs text-gray-400 mb-1">Nacionalidad *</label><select required name="nationality" onChange={handleChange} className="w-full bg-[#1a0b2e] border border-purple-700 rounded-lg px-3 py-2 text-white focus:border-pink-500 outline-none"><option value="Dominicana">Dominicana</option><option value="Extranjera">Extranjera</option></select></div>
                            <div><label className="block text-xs text-gray-400 mb-1">Tipo de Documento *</label><select required name="idType" onChange={handleChange} className="w-full bg-[#1a0b2e] border border-purple-700 rounded-lg px-3 py-2 text-white focus:border-pink-500 outline-none"><option value="C√©dula">C√©dula</option><option value="Pasaporte">Pasaporte</option></select></div>
                            <div><label className="block text-xs text-gray-400 mb-1">N√∫mero de Documento *</label><div className="relative"><Hash size={16} className="absolute left-3 top-3 text-gray-500" /><input required name="idNumber" onChange={handleChange} className="w-full bg-[#1a0b2e] border border-purple-700 rounded-lg pl-10 pr-3 py-2 text-white focus:border-pink-500 outline-none" placeholder="000-0000000-0" /></div></div>
                        </div>
                    </div>
                    <div>
                        <h3 className="text-sm font-bold text-pink-400 uppercase tracking-wider mb-3 flex items-center gap-2 border-t border-purple-800 pt-4"><MapPin size={16}/> Ubicaci√≥n</h3>
                        <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <div><label className="block text-xs text-gray-400 mb-1">Pa√≠s *</label><div className="relative"><Flag size={16} className="absolute left-3 top-3 text-gray-500" /><select required name="country" onChange={handleChange} className="w-full bg-[#1a0b2e] border border-purple-700 rounded-lg pl-10 pr-3 py-2 text-white focus:border-pink-500 outline-none"><option value="Rep√∫blica Dominicana">Rep√∫blica Dominicana</option><option value="USA">USA</option></select></div></div>
                            <div><label className="block text-xs text-gray-400 mb-1">Provincia / Estado *</label><select required name="province" onChange={handleChange} className="w-full bg-[#1a0b2e] border border-purple-700 rounded-lg px-3 py-2 text-white focus:border-pink-500 outline-none"><option value="">Seleccionar</option><option value="Santo Domingo">Santo Domingo</option><option value="Santiago">Santiago</option><option value="La Altagracia">La Altagracia</option><option value="Puerto Plata">Puerto Plata</option></select></div>
                            <div className="md:col-span-2"><label className="block text-xs text-gray-400 mb-1">Direcci√≥n Completa</label><div className="relative"><MapIcon size={16} className="absolute left-3 top-3 text-gray-500" /><input name="address" onChange={handleChange} className="w-full bg-[#1a0b2e] border border-purple-700 rounded-lg pl-10 pr-3 py-2 text-white focus:border-pink-500 outline-none" placeholder="Calle Principal #123, Apto 4B" /></div></div>
                        </div>
                    </div>
                    <button type="submit" className="w-full bg-gradient-to-r from-orange-500 to-pink-600 hover:from-orange-400 hover:to-pink-500 text-white font-bold py-3 rounded-lg shadow-lg transition-all transform active:scale-95 flex justify-center items-center gap-2"><Check size={20} /> Guardar Perfil Completo</button>
                </form>
            );
        }

        function ProfileView({ user, balance, totalSpent, history, inventory, onLogout, onBack, onOpenComplete, onPlayMore }) {
            const pendingGames = history.filter(h => h.status === 'pending');
            const recentGames = history.filter(h => h.status === 'completed');
            return (
                <div className="animate-fadeIn pb-12">
                    <div className="flex justify-between items-center mb-8">
                        <button onClick={onBack} className="text-gray-400 hover:text-white flex items-center gap-2">‚Üê Volver al inicio</button>
                        <button onClick={onLogout} className="text-red-400 hover:text-red-300 flex items-center gap-2 text-sm"><LogOut size={16} /> Cerrar Sesi√≥n</button>
                    </div>
                    <div className="flex flex-col md:flex-row gap-6 mb-8 items-center bg-[#2d1b4e] p-6 rounded-2xl border border-purple-800">
                        <div className="relative">
                            <div className="w-20 h-20 bg-gradient-to-tr from-pink-500 to-purple-600 rounded-full flex items-center justify-center text-3xl text-white shadow-xl">{user.firstName[0]}</div>
                            {!user.isProfileComplete && <span className="absolute bottom-0 right-0 w-6 h-6 bg-yellow-500 rounded-full border-2 border-[#2d1b4e] flex items-center justify-center text-xs font-bold text-black" title="Perfil incompleto">!</span>}
                        </div>
                        <div className="flex-1 text-center md:text-left">
                            <h1 className="text-2xl font-bold text-white">{user.firstName} {user.lastName}</h1>
                            <p className="text-gray-400 text-sm mb-2">{user.email}</p>
                            {!user.isProfileComplete ? <button onClick={onOpenComplete} className="text-xs bg-yellow-500/20 text-yellow-300 border border-yellow-500/50 px-3 py-1 rounded-full animate-pulse hover:bg-yellow-500/30">Completar Perfil para Retiros</button> : <span className="text-xs bg-green-500/20 text-green-300 border border-green-500/50 px-3 py-1 rounded-full flex items-center gap-1 w-fit mx-auto md:mx-0"><Check size={12}/> Perfil Verificado</span>}
                        </div>
                    </div>
                    <div className="grid grid-cols-1 md:grid-cols-3 gap-6 mb-10">
                        <div className="bg-[#2d1b4e] p-5 rounded-2xl border border-purple-800 flex items-center gap-4">
                            <div className="p-3 bg-green-500/20 rounded-xl text-green-400"><DollarSign size={24} /></div>
                            <div><p className="text-gray-400 text-xs uppercase tracking-wider">Saldo Disponible</p><p className="text-2xl font-bold text-white">${balance}</p></div>
                        </div>
                        <div className="bg-[#2d1b4e] p-5 rounded-2xl border border-purple-800 flex items-center gap-4">
                            <div className="p-3 bg-red-500/20 rounded-xl text-red-400"><TrendingUp size={24} /></div>
                            <div><p className="text-gray-400 text-xs uppercase tracking-wider">Total Gastado</p><p className="text-2xl font-bold text-white">${totalSpent}</p></div>
                        </div>
                        <div className="bg-[#2d1b4e] p-5 rounded-2xl border border-purple-800 flex items-center gap-4">
                            <div className="p-3 bg-blue-500/20 rounded-xl text-blue-400"><HistoryIcon size={24} /></div>
                            <div><p className="text-gray-400 text-xs uppercase tracking-wider">Juegos Jugados</p><p className="text-2xl font-bold text-white">{history.length}</p></div>
                        </div>
                    </div>
                    <div className="space-y-10">
                        <div>
                            <h2 className="text-xl font-bold text-white mb-4 flex items-center gap-2 border-l-4 border-orange-500 pl-3">Rifas y Ruletas Pendientes</h2>
                            {pendingGames.length > 0 ? (
                                <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                                    {pendingGames.map((game) => (
                                        <div key={game.id} className="bg-[#2d1b4e] rounded-xl p-6 border border-purple-700 flex flex-col items-center text-center shadow-lg hover:border-orange-500 transition-colors">
                                            <div className={`w-16 h-16 rounded-full bg-gradient-to-br ${game.gameColor} flex items-center justify-center text-3xl mb-4 shadow-md`}>{game.gameIcon}</div>
                                            <h3 className="font-bold text-lg text-white mb-1">{game.gameTitle}</h3>
                                            <p className="text-sm text-yellow-400 mb-4 animate-pulse">Sorteo en Proceso...</p>
                                            <button className="bg-cyan-600 hover:bg-cyan-500 text-white px-6 py-2 rounded-full text-sm font-bold flex items-center gap-2 transition-transform active:scale-95">Ver Estado <ArrowRight size={14}/></button>
                                        </div>
                                    ))}
                                </div>
                            ) : (
                                <div className="bg-[#2d1b4e]/50 border border-dashed border-purple-800 rounded-xl p-8 text-center text-gray-400">
                                    <p>No tienes juegos pendientes.</p>
                                    <button onClick={onPlayMore} className="text-orange-400 hover:text-orange-300 text-sm mt-2 underline">¬°Participa en una Rifa!</button>
                                </div>
                            )}
                        </div>
                        <div>
                            <div className="flex justify-between items-end mb-4">
                                <h2 className="text-xl font-bold text-white flex items-center gap-2 border-l-4 border-pink-500 pl-3">Mis Participaciones Recientes</h2>
                                <button onClick={onPlayMore} className="bg-orange-500 hover:bg-orange-600 text-white text-xs px-4 py-2 rounded-lg font-bold flex items-center gap-1 shadow-lg transition-colors">PARTICIPAR EN OTRAS <Gift size={12}/></button>
                            </div>
                            {recentGames.length > 0 ? (
                                <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                                    {recentGames.map((game) => (
                                        <div key={game.id} className="bg-[#2d1b4e] rounded-xl p-4 border border-purple-800 flex items-center gap-4 hover:bg-[#36205d] transition-colors group">
                                            <div className={`w-16 h-16 rounded-lg bg-gradient-to-br ${game.gameColor} flex items-center justify-center text-2xl shadow-inner flex-shrink-0 group-hover:scale-105 transition-transform`}>{game.gameIcon}</div>
                                            <div className="flex-1 min-w-0">
                                                <h3 className="font-bold text-white truncate">{game.gameTitle}</h3>
                                                <p className="text-xs text-gray-400 mb-1">{game.date}</p>
                                                <div className="flex items-center gap-2"><span className="text-xs bg-purple-900 text-purple-200 px-2 py-0.5 rounded border border-purple-700">-${game.cost}</span><span className="text-xs text-green-400 font-bold truncate">Gan√≥: {game.prize}</span></div>
                                            </div>
                                        </div>
                                    ))}
                                </div>
                            ) : (
                                <div className="text-center py-10 bg-[#2d1b4e]/30 rounded-xl"><p className="text-gray-500">A√∫n no has jugado.</p></div>
                            )}
                            {recentGames.length > 0 && (
                                <div className="mt-6 text-center"><button className="bg-cyan-600 hover:bg-cyan-500 text-white px-8 py-2 rounded-full text-sm font-bold shadow-lg transition-transform hover:scale-105">Ver m√°s historial</button></div>
                            )}
                        </div>
                    </div>
                </div>
            );
        }

        function ConfettiOverlay() {
            return (
                <div className="fixed inset-0 pointer-events-none z-50 flex items-center justify-center overflow-hidden">
                    {[...Array(20)].map((_, i) => (
                        <div key={i} className="absolute w-2 h-2 bg-pink-500 rounded-full animate-ping opacity-75" style={{ top: `${Math.random() * 100}%`, left: `${Math.random() * 100}%`, animationDuration: `${0.5 + Math.random()}s`, backgroundColor: ['#ec4899', '#06b6d4', '#f97316', '#fbbf24'][Math.floor(Math.random() * 4)] }}></div>
                    ))}
                    <div className="bg-black/80 absolute inset-0 flex items-center justify-center">
                        <div className="text-center animate-bounce">
                            <h1 className="text-6xl mb-2">üéâ</h1>
                            <h2 className="text-4xl font-bold text-white mb-2">¬°FELICIDADES!</h2>
                            <p className="text-xl text-yellow-400">Premio Canjeado Exitosamente</p>
                        </div>
                    </div>
                </div>
            );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
